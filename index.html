<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CeriaPoints</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="authContainer" class="auth-wrapper">
      <div class="auth-left">
        <img
          src="pictures/tmc-logo.png"
          alt="Tadika Matahari Ceria Logo"
          class="brand-logo"
        />

        <h1 class="brand-title">CeriaPoints</h1>

        <blockquote class="auth-quote">
          "Whatever is right, do it with unwavering determination, and see it
          through to the end."
          <span class="quote-author"
            >‚Äî Jing Si Aphorisms by Master Cheng Yen</span
          >
        </blockquote>
      </div>

      <div class="auth-right">
        <div id="loginForm">
          <h2>Welcome Back</h2>
          <p class="form-subtext">Sign in to your CeriaPoints account.</p>
          <label>Email Address</label>
          <input type="email" id="loginEmail" placeholder="Enter your email" />
          <label>Password</label>
          <input
            type="password"
            id="loginPassword"
            placeholder="Enter your password"
          />
          <button class="action-btn" onclick="loginUser()">Sign In</button>
          <div class="auth-links">
            <p class="toggle-text" onclick="toggleAuthView('forgot')">
              Forgot Password?
            </p>
            <p class="toggle-text" onclick="toggleAuthView('register')">
              Need an account? Register here.
            </p>
          </div>
        </div>

        <div id="forgotForm" style="display: none">
          <h2>Reset Password</h2>
          <p class="form-subtext">We'll send a recovery link to your email.</p>
          <label>Email Address</label>
          <input type="email" id="resetEmail" placeholder="Enter your email" />
          <button class="action-btn" onclick="resetPassword()">
            Send Reset Link
          </button>
          <div class="auth-links">
            <p class="toggle-text" onclick="toggleAuthView('login')">
              Back to Sign In
            </p>
          </div>
        </div>

        <div id="registerForm" style="display: none">
          <h2>Create Account</h2>
          <p class="form-subtext">Join our community recycling program.</p>
          <label>Full Name</label>
          <input type="text" id="regName" placeholder="e.g. Ali Bin Abu" />
          <label>Email Address</label>
          <input type="email" id="regEmail" placeholder="Enter your email" />
          <label>Password</label>
          <input
            type="password"
            id="regPassword"
            placeholder="Min 6 characters"
          />
          <button class="action-btn" onclick="registerUser()">Register</button>
          <div class="auth-links">
            <p class="toggle-text" onclick="toggleAuthView('login')">
              Already have an account? Sign in.
            </p>
          </div>
        </div>
      </div>
    </div>

    <div id="appContainer" class="app-container">
      <div class="app-header">
        <h1 class="logo" style="font-size: 1.8em">CeriaPoints</h1>
        <button class="logout-btn" onclick="logoutUser()">Log Out</button>
      </div>

      <div class="nav-buttons">
        <button class="nav-btn" id="navUser" onclick="switchRole('userPage')">
          My Impact
        </button>
        <button
          class="nav-btn"
          id="navWeigher"
          onclick="switchRole('weigherPage')"
        >
          Weigher Terminal
        </button>
        <button class="nav-btn" id="navAdmin" onclick="switchRole('adminPage')">
          Admin Panel
        </button>
      </div>

      <hr class="divider" />

      <div id="userPage" class="page" style="display: none">
        <div class="card main-points-card">
          <p class="greeting">
            Welcome,
            <strong id="displayUserName" style="color: var(--primary-color)"
              >User</strong
            >
          </p>
          <h1 class="points-display"><span id="userPointsDisplay">0</span></h1>
          <p class="subtitle" style="margin-bottom: 0">Total GreenPoints</p>
        </div>

        <h3 class="section-title">Lifetime Real-World Impact</h3>
        <div class="impact-grid">
          <div class="card impact-card">
            <div id="treesSaved" class="impact-number">0.0</div>
            <div class="impact-label">Trees<br />Saved</div>
          </div>
          <div class="card impact-card">
            <div id="co2Saved" class="impact-number">0.0</div>
            <div class="impact-label">Kg CO2<br />Prevented</div>
          </div>
          <div class="card impact-card">
            <div id="energySaved" class="impact-number">0.0</div>
            <div class="impact-label">kWh<br />Energy Saved</div>
          </div>
        </div>

        <div class="card leaderboard-card">
          <h3
            style="
              margin-top: 0;
              margin-bottom: 15px;
              color: var(--text-main);
              display: flex;
              align-items: center;
              justify-content: space-between;
            "
          >
            Top Recyclers <span>üèÜ</span>
          </h3>
          <div id="leaderboardList">
            <p style="text-align: center; color: var(--text-muted)">
              Loading leaderboard...
            </p>
          </div>
        </div>
      </div>

      <div id="weigherPage" class="page" style="display: none">
        <h2>Weigher Terminal</h2>
        <div class="card">
          <h3>Step 1: Find User</h3>
          <label>Enter User ID (UID):</label>
          <div class="search-row">
            <input
              type="text"
              id="usernameSearch"
              placeholder="Enter exact database ID"
            />
            <button class="action-btn search-btn" onclick="searchUser()">
              Search
            </button>
          </div>
          <p id="searchResult" class="search-result"></p>

          <hr class="divider" />

          <div id="weighingForm" style="display: none">
            <h3>Step 2: Weigh Items</h3>
            <label>Material Type:</label>
            <select id="materialSelect">
              <option value="plastic">Plastic</option>
              <option value="cardboard">Cardboard</option>
              <option value="aluminum">Aluminum</option>
            </select>

            <label>Weight (in KG):</label>
            <input type="number" id="weightInput" placeholder="e.g., 2.5" />

            <button class="action-btn" onclick="processWeighIn()">
              Award Points
            </button>
          </div>
        </div>
      </div>

      <div id="adminPage" class="page" style="display: none">
        <h2>Admin Panel</h2>
        <div class="card">
          <p>Current Point Rates:</p>
          <ul class="rates-list">
            <li>Plastic: <strong>100</strong> pts/kg</li>
            <li>Cardboard: <strong>50</strong> pts/kg</li>
            <li>Aluminum: <strong>200</strong> pts/kg</li>
          </ul>
        </div>
      </div>
    </div>

    <div id="customToast" class="toast"></div>

    <script type="module" src="script.js"></script>
  </body>
</html>
